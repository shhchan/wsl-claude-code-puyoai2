# チケット002: ゲームエンジンコア実装

## 概要
ぷよぷよ通ルールに準拠したゲームエンジンのコア部分をC++で実装

## 詳細タスク

### 1. フィールド実装
- [x] 6列×14段のフィールド構造の定義
- [x] 可視部分（1-12段）と隠し段（13-14段）の管理
- [x] ぷよの色情報（5色：赤緑青黄紫）の定義
- [x] フィールド状態の表現（128bitビットマップ最適化）

### 2. ぷよ操作システム
- [x] 操作ぷよ（軸ぷよ・子ぷよ）の構造定義
- [x] 4つの回転状態の実装
- [x] キック機能の実装（壁際での回転補助）
- [x] クイックターン機能の実装（180度回転）
- [x] 設置可能性判定の実装
- [x] ぷよ設置処理の実装

### 3. 14段目特殊仕様
- [x] 各列での14段目1回設置制限の実装
- [x] 14段目ぷよの自由落下対象外処理
- [x] 13-14段目連鎖無効化の実装（フィールド管理で対応）

### 4. 落下処理
- [x] 重力による自然落下の実装
- [x] 浮いているぷよの検出と落下
- [x] 14段目特殊仕様を考慮した落下処理
- [x] 落下アニメーション（エミュレータでは仮想）

### 5. NEXT表示システム
- [x] 2手先までの表示（現在+次+その次）
- [x] ぷよ生成アルゴリズム（均等確率）
- [x] 4色のランダム組み合わせ生成
- [x] NEXTぷよの色組み合わせ管理

## 依存関係
- チケット001（プロジェクト基盤構築）完了後に開始

## 優先度
高

## 推定工数
5-6時間

## 完了条件
- フィールド操作が正確に動作すること
- 14段目特殊仕様が正しく実装されていること
- NEXT表示が正確に動作すること